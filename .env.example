# Web
NEXT_PUBLIC_APP_NAME=Starbeam
# Marketing/site origin (root domain). In local dev the marketing app runs on 3001.
NEXT_PUBLIC_SITE_ORIGIN=http://localhost:3001

# App origin (app subdomain). Used for OAuth callbacks, invite links, and device auth.
NEXT_PUBLIC_WEB_ORIGIN=http://app.localhost:3000

# Hostname that should be treated as the "app" surface for login-first routing.
# Note: on most systems, any `*.localhost` name resolves to 127.0.0.1. If
# `app.localhost` does not work for you, you can use `localhost` instead:
# - NEXT_PUBLIC_WEB_ORIGIN=http://localhost:3000
# - AUTH_URL=http://localhost:3000
# - STARB_APP_HOST=localhost
STARB_APP_HOST=app.localhost

# Support / marketing
NEXT_PUBLIC_SUPPORT_EMAIL=support@starbeamhq.com
# Example: https://downloads.starbeamhq.com/starbeam/Starbeam-latest.dmg
NEXT_PUBLIC_MACOS_DOWNLOAD_URL=
NEXT_PUBLIC_MACOS_MIN_VERSION=macOS 14+

# Database
DATABASE_URL=postgresql://starbeam:starbeam@localhost:5435/starbeam
# Prisma migrations on Render use a direct (non-pooler) connection string.
# In local dev, it's fine to keep this the same as DATABASE_URL.
DIRECT_DATABASE_URL=postgresql://starbeam:starbeam@localhost:5435/starbeam

# Auth.js
AUTH_SECRET=dev_only_change_me
AUTH_URL=http://app.localhost:3000
GOOGLE_CLIENT_ID=
GOOGLE_CLIENT_SECRET=

# Email (OTP sign-in)
RESEND_API_KEY=
# Example: Starbeam <hello@starbeamhq.com> (requires domain verification in Resend)
EMAIL_FROM=

# SMTP (optional; takes precedence over RESEND_API_KEY when set)
# SMTP2GO defaults:
# SMTP_HOST=mail.smtp2go.com
SMTP_HOST=
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=
SMTP_PASS=

# Admins (comma-separated)
STARB_ADMIN_EMAILS=

# Token encryption (32 bytes base64 for AES-256-GCM key)
STARB_TOKEN_ENC_KEY_B64=

# OpenAI
OPENAI_API_KEY=

# Observability (optional)
# If SENTRY_DSN is unset/empty, Sentry is disabled.
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Codex exec (optional)
# Enables running `codex exec` in the worker to synthesize INTERNAL pulse cards
# from the materialized workspace context (source items + decrypted blobs).
#
# Requires `codex` on PATH in the worker runtime.
STARB_CODEX_EXEC_ENABLED=0
STARB_CODEX_MODEL_DEFAULT=gpt-5.2-codex
STARB_CODEX_REASONING_EFFORT=low
# When Codex exec is enabled, allow Codex to use web search tools.
# Default: enabled (unset). Set to 0 to disable web search.
STARB_CODEX_WEB_SEARCH_ENABLED=

# Connector polling (Phase 1 incremental sync)
# Polling keeps connector-derived signals relatively fresh without generating
# pulses. Pulse generation remains daily.
STARB_CONNECTOR_POLL_ENABLED=1
STARB_CONNECTOR_POLL_INTERVAL_MINS=15
STARB_CONNECTOR_POLL_BATCH=20

# Daily pulses
# Default behavior: once a user's local time is >= START_HOUR, they are eligible for that day.
# This avoids "missing users" in large orgs if the enqueue scan takes longer than a fixed window.
# To enforce a strict window, set STARB_DAILY_PULSE_STRICT_WINDOW=1.
STARB_DAILY_PULSE_ENABLED=1
STARB_DAILY_PULSE_WINDOW_START_HOUR=2
STARB_DAILY_PULSE_WINDOW_END_HOUR=5
STARB_DAILY_PULSE_ENQUEUE_BATCH=200
STARB_DAILY_PULSE_MAX_PAGES_PER_TICK=25
STARB_DAILY_PULSE_MAX_RUNTIME_MS=25000
STARB_DAILY_PULSE_STRICT_WINDOW=

# Hosted blob-store GC (deletes objects after a grace period once deletedAt is set)
STARB_BLOB_GC_ENABLED=1
STARB_BLOB_GC_GRACE_DAYS=14
STARB_BLOB_GC_BATCH=200

# Verify blob store read/write/delete at worker boot (recommended for hosted)
# Default: enabled in production; disabled otherwise.
STARB_BLOB_STORE_VERIFY_ON_BOOT=

# Legacy department web research (optional)
# When Codex exec is enabled and available, this legacy pipeline is disabled by default.
# Set to 1 to force-enable it, or 0 to force-disable it.
STARB_LEGACY_DEPT_WEB_RESEARCH_ENABLED=

# Abuse/cost caps (DB-backed rate limiting buckets)
STARB_DEVICE_START_LIMIT_5M=20
STARB_DEVICE_EXCHANGE_LIMIT_5M=120
STARB_RUN_NOW_USER_LIMIT_1M=3
STARB_RUN_NOW_WORKSPACE_LIMIT_1M=5
STARB_RUN_WORKSPACE_LIMIT_1D=20

# S3-compatible blob store (MinIO/R2)
S3_ENDPOINT=http://localhost:9000
S3_REGION=us-east-1
S3_ACCESS_KEY_ID=minio
S3_SECRET_ACCESS_KEY=minio123456
S3_BUCKET=starbeam
